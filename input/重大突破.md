---
title: 重大突破-分离辅音
date: 2024-04-20 23:44:33
tags: dialect
---
发现配的环境还是不大行，，于是今天又倒腾了好久的环境

一直很好奇为什么终端每次打印环境变量的时候都会出现一些奇怪的字符 就算是人工键入也是非常奇怪的字符，今天破案了

下次输环境变量的时候不要再右键文件属性然后复制了，直接点
![watch this](../img/env/微信截图_20240420234648.png)
就会出来一个直接可以复制的地址，这样就不会出现奇怪的字符了

再不行就重新下一个包（注意一下下载的是essential部分还是full部分 以免漏掉一些东西 不过我感觉根源还是上面的复制问题

又仔细研究了一下上次下的synthesis轮子，（如果方言能像拼音一样直接拼出来就好了，拆解成多个音频，每个音频播放固定的时长

居然被我找到了！吴语拼音！因为玉环话和温岭话比较相近所以打算采用温岭话拼音方案！[吴语协会温岭话拼音链接](https://wu-chinese.com/romanization/wenling.html)

从官网的辅音介绍下载了一个ogg（既然是方言爱好者官网的，肯定比我这个“门外汉”读的标准），但是问题在于这个音频是送气的（ta），所以就在想怎么把辅音和元音分开，问了chatgpt给的答案也不尽人意，最后hyx发挥了她的智慧——

主要思路就是利用pydub库（一个处理音频的库），将官网下载的音频找到非静音部分（这个灵感来源是华为录音的跳过静音功能），再截取前面的一小部分，就可以分离开了！

```python
from pydub import AudioSegment
from pydub.silence import detect_nonsilent
import os

# 加载音频文件
audio_file = "ta.ogg"
audio = AudioSegment.from_ogg(audio_file)

# 使用detect_nonsilent找到非静音部分
nonsilent_intervals = detect_nonsilent(audio, silence_thresh=-40, min_silence_len=50)

# 获取第一个非静音部分的开始位置
if nonsilent_intervals:
    start_pos = nonsilent_intervals[0][0]

    # 截取去掉静音部分后的前25毫秒音频
    chunk = audio[start_pos:start_pos + 25]  

    # 创建一个新的音频文件夹来保存截取出的音频
    output_folder = "output_audio"
    if not os.path.exists(output_folder):
        os.mkdir(output_folder)

    # 保存截取出的音频
    output_file = os.path.join(output_folder, "first_25ms_after_silence.ogg")
    chunk.export(output_file, format="ogg")

    print("成功截取去掉静音部分后的前25毫秒音频。")
else:
    print("未找到非静音部分。")

```
听了一下效果感觉还可以！明天试试看把它和元音音频合起来